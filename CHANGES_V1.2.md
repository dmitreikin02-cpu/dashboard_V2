# Изменения версии 1.2

## Дата: 2024-11-14

## Внесённые изменения

### 1. Централизованные нормативы

Добавлен объект `NORMS` для удобного изменения нормативов:

```javascript
const NORMS = {
    LOGIC_A: {
        receiving: 150,      // MOP Приёмка (шт)
        placement: 280,      // MOP Размещение (коробов)
        picking: 350,        // MOP Сборка (задач)
        control: 220         // MOP Контроль (операций)
    },
    LOGIC_B: {
        receiving: 120,      // Приёмка (шт)
        placement: 250,      // Размещение (коробов)
        picking: 300         // Сборка (задач)
    }
};
```

**Преимущества:**
- ✅ Все нормы в одном месте
- ✅ Легко изменить для конкретной логики
- ✅ Комментарии для каждой нормы
- ✅ Разные нормы для разных логик

### 2. Специальный layout для Логики A

Изменено расположение графиков для Логики A:

```
┌──────────────┬──────────────┐
│              │              │
│   Приёмка    │  Размещение  │
│   (слева)    │ (справа вверху)│
│              │              │
├──────────────┴──────────────┤
│                             │
│          Сборка             │
│   (внизу на всю ширину)     │
│                             │
└─────────────────────────────┘
```

**CSS Grid Template:**
```css
.charts-section.layout-custom {
    grid-template-areas:
        "receiving placement"
        "picking picking";
}
```

### 3. Гибкая система layouts

Добавлена поддержка разных layouts:

- **layout-default** - стандартная сетка 2x2 (для Логики B)
- **layout-custom** - специальная раскладка (для Логики A)

Каждый график имеет:
- `gridArea` - область на grid
- `order` - порядок отображения
- `norm` - норматив из централизованного объекта

### 4. Улучшенная функция renderCharts

```javascript
function renderCharts(metrics, logic) {
    // Применяет правильный layout класс
    // Сортирует графики по order
    // Применяет data-area атрибуты для позиционирования
}
```

## Как изменить нормы

### Для Логики A (новый дашборд):

```javascript
const NORMS = {
    LOGIC_A: {
        receiving: 150,   // ⬅️ Измените здесь
        placement: 280,   // ⬅️ Измените здесь
        picking: 350,     // ⬅️ Измените здесь
        control: 220      // ⬅️ Измените здесь
    },
    // ...
};
```

### Для Логики B (старый дашборд):

```javascript
const NORMS = {
    // ...
    LOGIC_B: {
        receiving: 120,   // ⬅️ Измените здесь
        placement: 250,   // ⬅️ Измените здесь
        picking: 300      // ⬅️ Измените здесь
    }
};
```

## Расположение графиков

### Логика A (Новый дашборд)

Порядок графиков (определяется `order`):
1. **MOP Приёмка** - левый верхний угол
2. **MOP Размещение** - правый верхний угол
3. **MOP Сборка** - внизу на всю ширину
4. **MOP Контроль** - (если есть данные)

### Логика B (Старый дашборд)

Стандартная сетка 2x2:
1. **Приёмка** - верхний левый
2. **Размещение** - верхний правый
3. **Сборка** - нижний левый

## Примеры изменения

### Пример 1: Увеличить норму для MOP Сборки

```javascript
const NORMS = {
    LOGIC_A: {
        // ...
        picking: 400,     // Было 350, стало 400
        // ...
    },
    // ...
};
```

### Пример 2: Изменить все нормы для Логики B

```javascript
const NORMS = {
    // ...
    LOGIC_B: {
        receiving: 150,   // Было 120
        placement: 300,   // Было 250
        picking: 350      // Было 300
    }
};
```

## Затронутые файлы

- `dashboard.html` - все изменения

## Обратная совместимость

- ✅ Все функции работают как прежде
- ✅ Автообновление каждые 60 секунд
- ✅ ТОП-3 сотрудников
- ✅ Цветовая индикация
- ✅ Линии норм на графиках
- ✅ Динамическое определение логики

## Тестирование

- ✅ Сервер запускается
- ✅ HTML загружается
- ✅ CSS layout-custom применяется
- ✅ Нормы определены правильно
- ✅ Grid areas работают

## Преимущества новой версии

1. **Легко изменяемые нормы** - все в одном месте
2. **Разные нормы для разных логик** - гибкость настройки
3. **Специальный layout для Логики A** - Сборка занимает больше места
4. **Комментарии** - понятно, что за норма
5. **Масштабируемость** - легко добавить новые логики

---

**Версия:** 1.2  
**Статус:** ✅ Готово  
**Автор:** AI Assistant  
**Предыдущая версия:** 1.1
